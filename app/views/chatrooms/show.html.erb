<div class='container'
  data-controller='chatroom-subscription'
  data-chatroom-subscription-chatroom-id-value="<%= @chatroom.id %>"
>
  <%# Chatroom Title %>
  <h1>#<%= @chatroom.name %></h1>

  <%# Messages %>
  <div class="messages" data-chatroom-subscription-target='messages'>
    <% @chatroom.messages.each do |message| %>
      <div class="message-<%= message.id %>"></div>
      <small>
        <strong><%= message.user.user_name %></strong>
        <i><%= message.created_at.strftime("%a %b %e at %l:%M %p") %></i>
      </small>
      <p><%= message.content %></p>
    <% end %>
    <%= simple_form_for [@chatroom, @message],
      html: {class: "d-flex"} do |f|
    %>
      <%= f.input :content,
        label: false,
        placeholder: "Message ##{@chatroom.name}",
        wrapper_html: {class: "flex-grow-1"}
      %>
      <%= button_tag(type: 'submit', class: "btn btn-primary mb-3") do %>
        <i class="fa-solid fa-paper-plane"></i>
      <% end %>
    <% end %>
  </div>
</div>
